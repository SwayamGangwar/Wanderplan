<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/header') %>
    <title>Travel Planner</title>

    <style>
    body { overflow-x: hidden; }
    .card { border-radius: 1rem; overflow: hidden; }
    .card-img-top { width: 100%; height: 220px; object-fit: cover; display: block; }

    .card.h-100 { display: flex; flex-direction: column; }
    .card .card-body { flex: 1 1 auto; }
    .card .card-footer { flex-shrink: 0; background: transparent; border-top: 0; padding-top: 0.75rem; }

    @media (min-width: 992px) { .card-img-top { height: 240px; } }
    </style>

</head>

<body>
    <%- include('./partials/nav') %>

    <div class="font-style bg-light d-flex flex-column min-vh-100 p-4" >

        <div style="padding-top: 1.5rem;">
            <h1 class="font-style" style="color:rgb(32,138,174); font-weight: bold;"><span style="color:black; padding-right: 0.5rem;">Explore,</span>Destinations</span></h1> 
            <p style="color:rgb(115, 130, 144); font-size: 1.4rem;">Discover amazing trips planned by fellow travelers around the world</p> 
        </div>

        <div class="mt-4 mb-3" style="width: 40vw; ">
            <form class="d-flex" role="search">
             <div class="input input-group" >
                <span class="input-group-text" style="border-top-left-radius: 1rem;"><i class="fa-solid fa-magnifying-glass"></i></span>
                <input class="form-control me-2" type="search" name="search" style="height: 8vh; border-bottom-right-radius: 1rem;" placeholder=" Search by destination, notes or tags..." aria-label="Search" value="<%= searchQuery %>"/>
                 <button class="btn btn-outline-success" type="submit" style="border-start-start-radius: 1rem;">Search</button>
             </div>
            </form>
        </div>

        
        <div class="d-flex p-3" style="color: rgb(115, 130, 144);">
            
            <i class="fa-solid fa-filter" style="margin-top: 0.8rem;"></i>
            <p style="margin-left: 1rem; font-weight: 500; font-size: 1.2rem; margin-top: 0.3rem;">Filter by:</p>
            
            <div style="margin-left: 1.2rem; ">
                <a href="/trips/explore?tag=All"><button type="button" class="btn btn-light" style="font-weight: 500;">All Trips</button></a>
                <a href="/trips/explore?tag=Budget Friendly"><button type="button" class="btn btn-light" style="font-weight: 500;">Budget Friendly</button></a>
                <a href="/trips/explore?tag=Luxury"><button type="button" class="btn btn-light" style="font-weight: 500;">Luxury</button></a>
                <a href="/trips/explore?tag=Adventure"><button type="button" class="btn btn-light" style="font-weight: 500;">Adventure</button></a>
                <a href="/trips/explore?tag=Culture"><button type="button" class="btn btn-light" style="font-weight: 500;">Culture</button></a>
            </div>

        </div>

        <div class="mt-3 mb-2">
            <h5 style="color:rgb(115, 130, 144); font-weight: 500; ">Showing <%= trips.length %> of <%= totalTrips %></h5>
        </div>

        <div class="container mt-4">

            <div class="row g-4">
                <% trips.forEach(trip => { %>

                    <div class="col-12 col-sm-6 col-md-4">
              <div class="card trip-card shadow-sm rounded" style="overflow: hidden; position: relative;">
  
                <img src=<%= trip.coverImageURL %> class="card-img-top" alt="Trip Image">

                <span class="privacy-tag <%= trip.privacy.toLowerCase() %>">
                  <%= trip.privacy.toLowerCase() %>
                </span>

              <div class="card-body">
                <h3 class="card-title">
                  <i class="fa-solid fa-location-dot text-info me-2"></i>
                  <%= trip.destination %>
                </h3>

              <p class="text-muted mb-2" style="font-weight: 500;">
                <%= trip.caption %> 
              </p>

              <p class="text-muted mb-2 mt-4" style="font-weight: 500;">
                <i class="fa-regular fa-calendar me-2"></i>
                <%= moment(trip.startDate).format("MMM DD, YYYY") %> - <%= moment(trip.endDate).format("MMM DD, YYYY") %>
              </p>

              <p class="text-muted mb-2" style="font-weight: 500;">
                <i class="fa-solid fa-indian-rupee-sign me-2"></i>
                <%= trip.budget %>
              </p>

              <p class="text-muted" style="font-weight: 500;">
                <i class="fa-regular fa-user me-1"></i>
                By <%= trip.createdBy.fullName %>
              </p>

                <span class="tripTag">
                  <%= trip.tags %>
                </span>

            </div>
            </div>
            </div>

                <% }) %>
            </div>

        </div>


       


    </div>

    <div class="bg-light" style="height: 2rem;">
    </div>

    <%- include('./partials/footer') %>
    <%- include('./partials/script') %>
</body>
</html>