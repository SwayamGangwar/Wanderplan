<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('./partials/header') %>
    <title>Profile</title>
</head>
<body>
    <%- include('./partials/nav') %>
  <div class="bg-light d-flex flex-column align-items-center min-vh-100">

      <div style="padding-top: 4rem; margin-right: 14rem;">
        <h1 class="font-style" style="color:rgb(32,138,174); font-weight: bold;"><span style="color:black; margin-right: 0.5rem;">My</span>Profile</h1> 
        <p style="color:rgb(115, 130, 144); font-size: 1.4rem;">Manage your account information and travel preferences</hp> 
      </div>

    <div class="card shadow" style="border-radius: 1rem; padding: 3rem; min-width:50rem; margin-top: 2rem;">

      <div class="d-flex justify-content-between align-items-center">
        
        <div class="d-flex align-items-center">
          <img src="/Images/default_profileImage.jpg" alt="profileImage" width="100" height="100" class="d-inline-block">

          <div class="d-flex flex-column" style="margin-left: 0.8rem; padding-top: 0.7rem;">
            <h3><%= user.fullName %></h3>
            <p style="color:rgb(115, 130, 144);">Member since <%= joinedDate %></p>
          </div>
        </div>

        <div>
          <button id="editBtn" class="btn btn-light" 
                  style="height:2.5rem; width: 8rem; font-weight: 500; border-radius: 0.6rem;">
            <i class="fa-regular fa-pen-to-square" style="padding-right: 0.8rem;"></i>Edit
          </button>

          <button id="cancelBtn" class="btn btn-light" 
                  style="height:2.5rem; width: 8rem; font-weight: 500; border-radius: 0.6rem; display: none;">
            <i class="fa-solid fa-xmark" style="padding-right: 0.8rem;"></i>Cancel
          </button>

        </div>

      </div>

      <% //View Mode %>
      <div id="profileView">

        <div class="mt-4 mb-4">
          <div style="font-weight: 500;">Full Name</div>
          <div style="font-size: 1.1rem;">
            <span><i class="fa-regular fa-user" style="padding-right: 0.8rem; padding-top: 1.6rem; color:rgb(115, 130, 144);"></i><%= user.fullName %></span>
          </div>
        </div>

        <div class="mt-3 mb-4">
          <div style="font-weight: 500;">Email Address</div>    
          <div style="font-size: 1.1rem;">
            <span><i class="fa-regular fa-envelope" style="padding-right: 0.8rem; padding-top: 1.6rem; color:rgb(115, 130, 144);"></i><%= user.email %></span>
          </div>
        </div>

        <div class="mt-3 mb-4">
          <div style="font-weight: 500;">Location</div>
          <div style="font-size: 1.1rem;">
            <span><i class="fa-solid fa-location-dot" style="padding-right: 0.8rem; padding-top: 1.6rem; color:rgb(115, 130, 144);"></i><%= user.location %></span>
          </div>
        </div>

        <div class="mt-3 mb-4">
          <div style="font-weight: 500;">Bio</div>
          <div style="padding-top: 1rem; font-size: 1.1rem;">
            <span><%= user.bio %></span>
          </div>
        </div>

        <div class="mt-3 mb-4">
          <div style="font-weight: 500;">Member Since</div>
          <div style="font-size: 1.1rem;">
            <span><i class="fa-regular fa-calendar" style="padding-right: 0.8rem; padding-top: 1.6rem; color:rgb(115, 130, 144);"></i><%= joinedDate %></span>
          </div>
        </div>

        
        <div class="d-flex justify-content-center" style="padding-top: 1.4rem;">
            <a class="btn btn-info text-white fw-bold" href="/profile/logout" role="button" style="background-color: #20a4c9; height: 3rem; width: 8rem; padding-top: 0.6rem;"><i class="fa-solid fa-arrow-right-from-bracket" style="padding-right: 0.8rem;"></i>Logout</a>
        </div>

      </div>


      <% //Edit Mode %>
      
    <form id="profileForm" action="/profile/edit" method="post" style="display: none;" enctype="multipart/form-data">

      <div class="mt-4 mb-4">
        <label style="font-weight: 500;">Full Name</label>
        <div class="input-group" style="padding-top: 1rem;">
          <span class="input-group-text bg-white">
            <i class="fa-regular fa-user" style="color:rgb(115, 130, 144);"></i>
          </span>
          <input type="text" name="fullName" class="form-control rounded-end" style="height: 45px;"
             value="<%= user.fullName %>">
        </div>
     </div>

      <div class="mt-3 mb-4">
        <label style="font-weight: 500;">Email Address</label>
        <div class="input-group" style="padding-top: 1rem;">
          <span class="input-group-text bg-white">
            <i class="fa-regular fa-envelope" style="color:rgb(115, 130, 144);"></i>
          </span>
          <input type="email" name="email" class="form-control rounded-end" style="height: 45px;"
             value="<%= user.email %>">
        </div>
      </div>

      <div class="mt-3 mb-4">
        <label style="font-weight: 500;">Location</label>
        <div class="input-group" style="padding-top: 1rem;">
          <span class="input-group-text bg-white">
            <i class="fa-solid fa-location-dot" style="color:rgb(115, 130, 144);"></i>
          </span>
          <input type="text" name="location" class="form-control rounded-end" style="height: 45px;"
             value="<%= user.location %>">
        </div>
      </div>

      <div class="mt-3 mb-4">
        <label style="font-weight: 500;">Bio</label>
        <div style="padding-top: 1rem;">
          <textarea name="bio" class="form-control rounded-end"><%= user.bio %></textarea>
        </div>
      </div>
      
        <div class="mt-3 mb-4">
          <div style="font-weight: 500;">Member Since</div>
          <div style="font-size: 1.1rem;">
            <span><i class="fa-regular fa-calendar" style="padding-right: 0.8rem; padding-top: 1.6rem; color:rgb(115, 130, 144);"></i><%= joinedDate %></span>
          </div>
        </div>

      
        <div class="d-grid" style="padding-top: 1.4rem;">
            <button type="submit" class="btn btn-info text-white fw-bold" style="background-color: #20a4c9; height:2.8rem"><i class="fa-regular fa-file" style="padding-right: 1rem;"></i>Save Changes</button>
        </div>
    

    </form>

  </div>

    <div class="bg-light" style="height: 5rem;">
    </div>


    <script src="/script.js"></script>
    <%- include('./partials/footer') %>
    <%- include('./partials/script') %>
</body>
</html>